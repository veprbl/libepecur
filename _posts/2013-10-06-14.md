---
layout: post
title: "Профили сечения треков плоскостью Y=0"
date: 2013-10-06 15:17:37
---

 С целью уточнения юстировочных параметров было построены две проекции сечения треков плоскостью Y=0. Графики в первой строке имеют смысл (слева направо):

1.  X-проекция для сечения треков из левого плеча
2.  X-проекция для сечения треков из правого плеча
3.  Вычитание гистограммы 1 из гистограммы 2
4.  X-проекция сечения трека левого плеча минус X-проекция сечения трека правого плеча

Во второй строке всё то же самое, но для Z проекции.

[<img src="/assets/track_plane_section.svg" alt="" width="567" height="292" />][1]

 [1]: /assets/track_plane_section.svg

 

создано при помощи macros/track\_plane\_section.C<!--break-->

<table border="0">
  <tbody>
    <tr>
      <td>
        GIT_COMMIT_ID
      </td>
      
      <td>
        ~~~ 73c3d211d4e48432262b93df7127599b02157eb0
      </td>
    </tr>
    
    <tr>
      <td>
        INPUT_FILE
      </td>
      
      <td>
        /Users/veprbl/26061082.dat
      </td>
    </tr>
    
    <tr>
      <td>
        GEOMETRY_FILE
      </td>
      
      <td>
        ../contrib/geom_apr10.c
      </td>
    </tr>
  </tbody>
</table>

 После сдвига правой камеры на вектор x,y,z=3.0;0;0.2 получается такая картинка (изменились только гистограммы из правой половины – 4,5,7,8)

[<img src="/assets/track_plane_section2.svg" alt="" width="567" height="292" />][2]

 [2]: /assets/track_plane_section2.svg

<table border="0">
  <tbody>
    <tr>
      <td>
        GIT_COMMIT_ID
      </td>
      
      <td>
        ad8098870bb0ac8a9dadeea537e575c1c0997aad
      </td>
    </tr>
    
    <tr>
      <td>
        INPUT_FILE
      </td>
      
      <td>
        /Users/veprbl/26061082.dat
      </td>
    </tr>
    
    <tr>
      <td>
        GEOMETRY_FILE
      </td>
      
      <td>
        ../contrib/geom_apr10.c
      </td>
    </tr>
  </tbody>
</table>

В Z проекции всё стало гораздо лучше. В X, как мне кажется, можно сделать ещё лучше. Я зафитировал гауссом крайний левый и крайний правый пик для гистограммы 1:

<pre>EXT PARAMETER                                   STEP         FIRST   
  NO.   NAME      VALUE            ERROR          SIZE      DERIVATIVE 
   1  Constant     9.10613e+02   1.12086e+01   1.11296e-02  -5.95957e-06
   2  Mean        -3.79187e+02   1.09349e-01   1.80810e-04  -3.76572e-04
   3  Sigma        7.72782e+00   1.80076e-01   3.69343e-06  -8.86842e-03<br /><br />  EXT PARAMETER                                   STEP         FIRST   
  NO.   NAME      VALUE            ERROR          SIZE      DERIVATIVE 
   1  Constant     2.55035e+03   1.99908e+01   2.43719e-02   5.47560e-05
   2  Mean         2.08578e+02   5.65917e-02   9.94577e-05   3.50737e-03
   3  Sigma        6.41468e+00   8.52838e-02   6.80198e-06   2.48155e-01</pre>

И аналогично для гистограммы 2:

<pre>EXT PARAMETER                                   STEP         FIRST   
  NO.   NAME      VALUE            ERROR          SIZE      DERIVATIVE 
   1  Constant     9.25609e+02   1.08426e+01   1.94623e-02   1.56544e-05
   2  Mean        -3.71665e+02   1.13253e-01   2.88894e-04   8.07332e-04
   3  Sigma        8.49727e+00   1.87349e-01   6.59701e-06   5.94439e-02

  EXT PARAMETER                                   STEP         FIRST   
  NO.   NAME      VALUE            ERROR          SIZE      DERIVATIVE 
   1  Constant     2.90196e+03   2.22079e+01   4.35666e-02   1.06819e-04
   2  Mean         2.09145e+02   4.63646e-02   1.23610e-04  -8.44533e-03
   3  Sigma        5.62499e+00   6.54534e-02   8.86136e-06   4.29350e-01</pre>

Конкретно меня интересовали средние значения. Выпишем их:

<table border="0">
  <tbody>
    <tr>
      <td>
         
      </td>
      
      <td>
        Левый пик
      </td>
      
      <td>
        Правый пик
      </td>
    </tr>
    
    <tr>
      <td>
        Гистограмма 1
      </td>
      
      <td>
        -379.1
      </td>
      
      <td>
        208.6
      </td>
    </tr>
    
    <tr>
      <td>
        Гистограмма 2
      </td>
      
      <td>
        -371.7
      </td>
      
      <td>
        209.1
      </td>
    </tr>
  </tbody>
</table>

Видим, что расстояния между пиками не равны. Получается, очевидных эффектов операции относительного сдвига камер нам будет явно недостаточно. Под очевидным эффектом я подразумеваю сдвиг пиков X проекции при смещении камер вдоль этой самой оси.

Ещё можно двигать вдоль Y, чтобы случилась перефокусировка изображения на плоскости Y=0, но мне сложно предсказать, как должна выглядеть правильная операция.

Или можно вращать камеры. Моя интуиция говорит мне, что вращение камер на мишень разведёт пики, и наоборот, если наводить камеры в другую сторону, чтобы они стояли чуть больше "лицом к лицу", пички должны разъехаться. Тоесть нам нужно будет произвести вращение обоих камер в одну сторону (против или по часовой стрелке). Хотя если взглянуть на Z проекцию, а именно, на обновлённую версию графика 7 (где вычитаются гистограммы Z-проекции), видно, что ему бы тоже не мешало расширить распределение правой камеры (график 6) и сузить распределение левой (график 5). Понятное дело, что в вертикальной плоскости у нас опции вращения вроде как нет, поэтому оно должно как-то решиться смещением камер.